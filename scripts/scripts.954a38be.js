"use strict";angular.module("angularSimpleApp",["ngAnimate","ngMessages","ngResource","ngRoute","ui.bootstrap","bootstrapLightbox","uiGmapgoogle-maps"]).constant("config",{endpoint:"http://jsonplaceholder.typicode.com"}).config(["$routeProvider",function(a){a.when("/posts",{templateUrl:"views/posts.html",controller:"PostsCtrl"}).when("/posts/:id",{templateUrl:"views/post.html",controller:"PostCtrl"}).when("/users",{templateUrl:"views/users.html",controller:"UsersCtrl"}).when("/users/:id",{templateUrl:"views/user.html",controller:"UserCtrl"}).when("/albums",{templateUrl:"views/albums.html",controller:"AlbumsCtrl"}).when("/albums/:id",{templateUrl:"views/album.html",controller:"AlbumCtrl"}).otherwise({redirectTo:"/posts"})}]),angular.module("angularSimpleApp").controller("HeaderCtrl",["$scope","$uibModal","$location",function(a,b,c){a.isCollapsed=!0,a.isActive=function(a){return c.path().substr(0,a.length)===a},a.openRegisterForm=function(a){b.open({animation:!0,templateUrl:"views/register.html",controller:"RegisterFormCtrl",size:a})}}]),angular.module("angularSimpleApp").controller("RegisterFormCtrl",["$scope","$uibModalInstance",function(a,b){a.submit=function(){b.close()}}]),angular.module("angularSimpleApp").directive("appHeader",function(){return{templateUrl:"views/header.html",restrict:"E",controller:"HeaderCtrl"}}),angular.module("angularSimpleApp").factory("Posts",["$resource","config",function(a,b){return a(b.endpoint+"/posts/:id",{userId:"@id"})}]),angular.module("angularSimpleApp").controller("PostsCtrl",["$scope","Posts","Users",function(a,b,c){c.query().$promise.then(function(c){a.users=_.keyBy(c,"id"),a.posts=b.query()})}]),angular.module("angularSimpleApp").factory("Users",["$resource","config",function(a,b){return a(b.endpoint+"/users/:id")}]),angular.module("angularSimpleApp").controller("UsersCtrl",["$scope","Users",function(a,b){a.users=b.query()}]),angular.module("angularSimpleApp").controller("UserCtrl",["$scope","Users","Albums","Posts","$routeParams","$uibModal",function(a,b,c,d,e,f){a.user=b.get({id:e.id},function(){a.map={center:{latitude:a.user.address.geo.lat,longitude:a.user.address.geo.lng},zoom:4}}),a.showMap=function(){f.open({animation:!0,templateUrl:"views/map.html",size:"lg",scope:a})},a.albums=c.query({userId:e.id}),a.posts=d.query({userId:e.id})}]),angular.module("angularSimpleApp").controller("PostCtrl",["$scope","Posts","Users","$routeParams",function(a,b,c,d){a.post=b.get({id:d.id},function(b){a.user=c.get({id:b.userId})})}]),angular.module("angularSimpleApp").controller("AlbumCtrl",["$scope","Photos","$routeParams","Lightbox",function(a,b,c,d){a.photos=b.query({albumId:c.id}),a.openLightboxModal=function(b){d.openModal(a.photos,b)}}]),angular.module("angularSimpleApp").factory("Photos",["$resource","config",function(a,b){return a(b.endpoint+"/photos/:id",{albumId:"@id"})}]),angular.module("angularSimpleApp").controller("AlbumsCtrl",["$scope","Albums","Users",function(a,b,c){c.query().$promise.then(function(c){a.users=_.keyBy(c,"id"),a.albums=b.query()})}]),angular.module("angularSimpleApp").factory("Albums",["$resource","config",function(a,b){return a(b.endpoint+"/albums/:id",{userId:"@id"})}]),angular.module("angularSimpleApp").run(["$templateCache",function(a){a.put("views/album.html",'<div class="row"> <div ng-repeat="photo in photos" class="col-xs-3 col-md-2"> <a ng-click="openLightboxModal($index)" class="thumbnail"> <img ng-src="{{photo.thumbnailUrl}}" class="img-thumbnail"> </a> </div> </div>'),a.put("views/albums.html",'<div class="row"> <div ng-repeat="album in albums" class="col-xs-6 col-md-4"> <a href="#/albums/{{album.id}}" class="thumbnail"> <img src="https://vk.com/images/camera_400.png" alt="" class="img-thumbnail"> <span class="thumbnail-info"> {{album.title}}<br> <span class="fa-right"> <em>{{users[album.userId].name}}</em> </span> </span> </a> </div> </div>'),a.put("views/header.html",'<div class="header"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" aria-expanded="false" ng-click="isCollapsed = !isCollapsed"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#"> <img alt="Logo" src="images/logo.cc2fb420.png" height="20"> </a> </div> <div class="collapse navbar-collapse" uib-collapse="isCollapsed"> <ul class="nav navbar-nav navbar-left"> <li role="presentation" ng-class="{ active: isActive(\'/posts\') }"> <a href="#/posts">Posts</a> </li> <li role="presentation" ng-class="{ active: isActive(\'/users\') }"> <a href="#/users">Users</a> </li> <li role="presentation" ng-class="{ active: isActive(\'/albums\') }"> <a href="#/albums">Albums</a> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href ng-click="openRegisterForm()" class="navbar-link"> <span>Register</span> </a> </li> </ul> </div> </div> </nav> </div>'),a.put("views/map.html",'<ui-gmap-google-map center="map.center" zoom="map.zoom"> <ui-gmap-marker idkey="data.id" coords="map.center"> <ui-gmap-window coords="map.center" show="true"> {{data.address.city}}, {{data.address.street}} </ui-gmap-window> </ui-gmap-marker> </ui-gmap-google-map>'),a.put("views/post.html",'<div> <h3 class="text-uppercase">{{post.title}}</h3> <p> {{post.body}} </p> <p class="ta-right"> <a href="#/users/{{post.userId}}">{{user.name}}</a> </p> </div>'),a.put("views/posts.html",'<ul class="list-group"> <li class="list-group-item" ng-repeat="post in posts"> <h3 class="text-uppercase"> <a href="#/posts/{{post.id}}">{{post.title}}</a> </h3> <p> {{post.body}} </p> <p class="ta-right"> <a href="#/users/{{post.userId}}"> <em>{{users[post.userId].name}}</em> </a> </p> </li> </ul>'),a.put("views/register.html",'<form name="registerForm" ng-submit="registerForm.$valid && submit()" novalidate> <div class="modal-header"> <h3 class="modal-title">Register</h3> </div> <div class="modal-body"> <div class="form-group required"> <label for="username">Username</label> <input type="text" class="form-control" id="username" name="username" ng-model="user.name" placeholder="Username" required ng-maxlength="50"> <span class="help-block" ng-messages="registerForm.username.$error" ng-if="registerForm.username.$touched || registerForm.$submitted" role="alert"> <span ng-message="required">You did not enter a field</span> <span ng-message="maxlength">Your field is too long</span> </span> </div> <div class="form-group required"> <label for="password">Password</label> <input type="password" class="form-control" id="password" name="password" ng-model="user.password" placeholder="Password" required ng-minlength="6" ng-maxlength="32"> <span class="help-block" ng-messages="registerForm.password.$error" ng-if="registerForm.password.$touched || registerForm.$submitted" role="alert"> <span ng-message="required">You did not enter a field</span> <span ng-message="minlength">Your field is too short</span> <span ng-message="maxlength">Your field is too long</span> </span> </div> <div class="form-group"> <label for="email">Email address</label> <input type="email" class="form-control" id="email" name="email" ng-model="user.email" placeholder="Email"> <span class="help-block" ng-messages="registerForm.email.$error" ng-if="registerForm.email.$invalid" role="alert"> <span>Email is wrong</span> </span> </div> </div> <div class="modal-footer"> <button type="submit" class="btn btn-default">Submit</button> </div> </form>'),a.put("views/user.html",'<div class="panel panel-default" ng-show="user.id"> <div class="panel-body"> <div class="media"> <div class="media-left"> <a href="#"> <img class="media-object" src="https://vk.com/images/camera_400.png" alt="" width="150"> </a> </div> <div class="media-body"> <h4 class="media-heading">{{user.username}}</h4> <h5>{{user.name}}, {{user.company.name}}</h5> <p> <span class="glyphicon glyphicon-earphone"></span> <a href="tel:{{user.phone}}">{{user.phone}}</a><br> <span class="glyphicon glyphicon-envelope"></span> <a href="mailto:{{user.email}}">{{user.email}}</a><br> <span class="glyphicon glyphicon-globe"></span> <a href="{{user.website}}" target="_blank">{{user.website}}</a><br> <span class="glyphicon glyphicon-map-marker"></span> <a href ng-click="showMap()">Show map</a> </p> </div> </div> </div> </div> <div class="row"> <div ng-repeat="album in albums" class="col-xs-4 col-md-2" ng-show="albums[0]"> <a href="#/albums/{{album.id}}" class="thumbnail"> <img src="https://vk.com/images/camera_400.png" alt="" class="img-thumbnail"> <span class="thumbnail-info"> {{album.title}}<br> </span> </a> </div> </div> <div class="list-group" ng-show="posts[0]"> <a class="list-group-item" ng-repeat="post in posts" href="#/posts/{{post.id}}"> <h3>{{post.title}}</h3> <p> {{post.body}} </p> </a> </div>'),a.put("views/users.html",'<div class="table-responsive" ng-show="users[0]"> <table class="table table-stripped"> <thead> <tr> <td>#</td> <td>Username</td> <td>Name</td> <td>Company</td> <td>Website</td> <td>Email</td> </tr> </thead> <tbody> <tr ng-repeat="user in users"> <td>{{user.id}}</td> <td>{{user.username}}</td> <td> <a href="#/users/{{user.id}}">{{user.name}}</a> </td> <td>{{user.company.name}}</td> <td> <a href="{{user.website}}" target="_blank">{{user.website}}</a> </td> <td> <a href="mailto:{{user.email}}">{{user.email}}</a> </td> </tr> </tbody> </table> </div>')}]);